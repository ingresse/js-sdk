machine:
    environment:
        COVERALLS_SERVICE_NAME: circleci
        COVERALLS_REPO_TOKEN: u8Ftj6YdfstIAQAUlqYHuJdW7BDqiqQa2
        COVERALLS_GIT_COMMIT: $CIRCLE_SHA1
        COVERALLS_GIT_BRANCH: $CIRCLE_BRANCH

general:
    artifacts:
        - "./coverage/report-lcov"

dependencies:
    override:
        - npm install

test:
    pre:
        - npm install coveralls -g
    post:
        - cat ./coverage/report-lcov/lcov.info | coveralls || { echo 'Coveralls error'; exit 0; }

